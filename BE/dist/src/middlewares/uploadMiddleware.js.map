{"version":3,"file":"uploadMiddleware.js","sourceRoot":"","sources":["../../../src/middlewares/uploadMiddleware.ts"],"names":[],"mappings":"AAAA,kDAAkD;AAClD,6BAA6B;AAE7B,oDAAoD;AAEpD,OAAO,MAAM,MAAM,QAAQ,CAAC;AAG5B,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,EAAE,CAAC;AACvC,MAAM,MAAM,GAAG,MAAM,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE,QAAQ,EAAE,CAAC,GAAG,IAAI,GAAG,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM;AAEjF,yDAAyD;AACzD,MAAM,YAAY,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IACvE,IAAI,CAAC,GAAG,CAAC,IAAI;QAAE,OAAO,IAAI,EAAE,CAAC;IAC7B,IAAI,EAAE,CAAC;AACT,CAAC,CAAC;AAEF,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,CAAC;AAGhC,iDAAiD;AACjD,yCAAyC","sourcesContent":["// import multer, { StorageEngine } from \"multer\";\r\n// import sharp from \"sharp\";\r\n\r\n//для аватарки в профиле/ передаём файл, грузим в S3\r\n\r\nimport multer from \"multer\";\r\nimport { Request, Response, NextFunction } from \"express\";\r\n\r\nconst storage = multer.memoryStorage();\r\nconst upload = multer({ storage, limits: { fileSize: 5 * 1024 * 1024 } }); // 5MB\r\n\r\n// передаём файл дальше (загрузим его в S3 в контроллере)\r\nconst processImage = (req: Request, res: Response, next: NextFunction) => {\r\n  if (!req.file) return next();\r\n  next();\r\n};\r\n\r\nexport { upload, processImage };\r\n\r\n\r\n//просто принимает файл и передаёт в контроллер, \r\n// без обработки (файл сразу уходит в S3)"]}