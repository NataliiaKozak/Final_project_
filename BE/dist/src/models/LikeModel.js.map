{"version":3,"file":"LikeModel.js","sourceRoot":"","sources":["../../../src/models/LikeModel.ts"],"names":[],"mappings":"AAAA,OAAO,QAAQ,EAAE,EAAE,MAAM,EAAmB,MAAM,UAAU,CAAC;AAW7D,MAAM,UAAU,GAAG,IAAI,MAAM,CAC3B;IACE,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAClE,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,MAAM,EAAE;IAClD,OAAO,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,SAAS,EAAE;CACzD,EACD,EAAE,UAAU,EAAE,IAAI,EAAE,CACrB,CAAC;AAEF,kCAAkC;AAClC,UAAU,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;AACvE,UAAU,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;AAE1E,eAAe,QAAQ,CAAC,KAAK,CAAQ,MAAM,EAAE,UAAU,CAAC,CAAC","sourcesContent":["import mongoose, { Schema, Document, Types } from 'mongoose';\r\n\r\nexport interface ILike extends Document {\r\n  _id: Types.ObjectId;\r\n  user: Types.ObjectId;\r\n  post?: Types.ObjectId;\r\n  comment?: Types.ObjectId;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nconst LikeSchema = new Schema<ILike>(\r\n  {\r\n    user: { type: Schema.Types.ObjectId, ref: 'User', required: true },\r\n    post: { type: Schema.Types.ObjectId, ref: 'Post' },\r\n    comment: { type: Schema.Types.ObjectId, ref: 'Comment' },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// индексы для уникальности лайков\r\nLikeSchema.index({ user: 1, post: 1 }, { unique: true, sparse: true });\r\nLikeSchema.index({ user: 1, comment: 1 }, { unique: true, sparse: true });\r\n\r\nexport default mongoose.model<ILike>('Like', LikeSchema);\r\n"]}