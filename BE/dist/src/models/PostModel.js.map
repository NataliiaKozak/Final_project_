{"version":3,"file":"PostModel.js","sourceRoot":"","sources":["../../../src/models/PostModel.ts"],"names":[],"mappings":"AAAA,OAAO,QAAQ,EAAE,EAAE,MAAM,EAAmB,MAAM,UAAU,CAAC;AAe7D,MAAM,UAAU,GAAG,IAAI,MAAM,CAC3B;IACE,WAAW,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE;IAC9C,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACpE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;IAClE,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,SAAS,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;CACzE,EACD,EAAE,UAAU,EAAE,IAAI,EAAE,CACrB,CAAC;AAEF,mBAAmB;AACnB,UAAU,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC;IACnC,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;AAC3B,CAAC,CAAC,CAAC;AAEH,UAAU,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC;IACtC,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;AAC9B,CAAC,CAAC,CAAC;AAEH,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;AAC7C,UAAU,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;AAE/C,eAAe,QAAQ,CAAC,KAAK,CAAQ,MAAM,EAAE,UAAU,CAAC,CAAC","sourcesContent":["import mongoose, { Schema, Document, Types } from \"mongoose\";\r\n\r\nexport interface IPost extends Document {\r\n  _id: Types.ObjectId;\r\n  description?: string;\r\n  image: string;\r\n  author: Types.ObjectId;\r\n  likes: Types.ObjectId[];\r\n  comments: Types.ObjectId[];\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n  likesCount?: number;\r\n  commentsCount?: number;\r\n}\r\n\r\nconst PostSchema = new Schema<IPost>(\r\n  {\r\n    description: { type: String, required: false },\r\n    image: { type: String, required: true },\r\n    author: { type: Schema.Types.ObjectId, ref: \"User\", required: true },\r\n    likes: [{ type: Schema.Types.ObjectId, ref: \"Like\", default: [] }],\r\n    comments: [{ type: Schema.Types.ObjectId, ref: \"Comment\", default: [] }],\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// Виртуальные поля\r\nPostSchema.virtual(\"likesCount\").get(function (this: IPost) {\r\n  return this.likes.length;\r\n});\r\n\r\nPostSchema.virtual(\"commentsCount\").get(function (this: IPost) {\r\n  return this.comments.length;\r\n});\r\n\r\nPostSchema.set(\"toJSON\", { virtuals: true });\r\nPostSchema.set(\"toObject\", { virtuals: true });\r\n\r\nexport default mongoose.model<IPost>(\"Post\", PostSchema);\r\n"]}